---
title: "Intro to R Markdown"
subtitle: "Automate! Reproduce! Win!"
author: "Matt Dray"
date: "14 May 2018"
output:
  ioslides_presentation:
    theme: cerulean
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, error = FALSE)
library(dplyr); library(knitr); library(ggplot2)
my_value <- "Lotad"
```

## The problem is the process

The Excel-Word approach is looooong and error-prone. Exaggerated example:

1. Receive non-machine-readable data in Excel format
2. Use a pre-prepared Excel template to reformat the data
3. Generate figures, tables and plots
4. Copy and paste to ~100-page Word document
5. Find error/need to alter something
6. Fix it
7. Spend ages re-copy-pasting the updated bits
8. Get confused about the current working version
9. Repeat steps 5 to 7 until 4am

<div class="notes">
Your choice of Pokemon is *wrong*.
</div>

## Minimise the risk

We can reduce human error and go faster with R.

1. Receive machine-readable data in Excel format
2. Run a pre-prepared R Markdown file
3. Make minor tweaks if needed and re-render stress-free
4. Use the saved time to prepare more informative commentary and have a cup of tea

## R Markdown is the answer

- Write plain text in a .Rmd file
- 'Mark up' with symbols (`*`, `[]`, `^`, etc)
- Embed your R code
- Render to an output HTML, Word or PDF document

.Rmd `r emo::ji("arrow_right")` `knitr` `r emo::ji("arrow_right")` .md `r emo::ji("arrow_right")`  `pandoc` `r emo::ji("arrow_right")` .html/.pdf/.docx

In RStudio: Help > Cheatsheets for hints and tips.

## R Markdown formatting

You type:

```
*Italic*, **bold** super^script^ and a [link](www.gov.uk).
```

You get:

> *Italic*, **bold**, super^script^ and a [link](www.gov.uk).


## Inline code

You can write some R code in the middle of a sentence! 

Wrap the code in backticks (the button under the Esc key) and start it with the letter `r`.

You type:

```{r eval=FALSE, echo=TRUE}
The answer to 1 + 1 is `r 1 + 1`
```

You get:

> The answer to 1 + 1 is `r 1 + 1`

## Inline code

Let's say `my_value <- "Lotad"`

You type:

```{r eval=FALSE, echo=TRUE}
The best Pokemon is `r my_value`
```

<div class="notes">
Your choice of Pokemon is *wrong*.
</div>

You get:

> The best Pokemon is `r my_value`

## Code chunks

You type:

````
Here's an important plot of chick weights and feed types.

```{r chicks}`r ''`
chickwts %>%
  group_by(feed) %>% 
  ggplot() +
  geom_col(aes(x = feed, y = weight))
```
````

## Code chunks

You get:

> Here's an important table of chick weights and feed types.

```{r chicks}
chickwts %>%
  group_by(feed) %>% 
  ggplot() +
  geom_col(aes(x = feed, y = weight))
```

## How to

1. In RStudio: File > New File > R Markdown
2. Write your text and embed your code
4. Click 'Knit' to render the document
5. It outputs to your working directory